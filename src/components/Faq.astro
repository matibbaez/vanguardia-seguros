---
const faqs = [
  {
    id: "f1",
    question: "¬øQu√© documentaci√≥n necesito para circular?",
    answer: "Para circular legalmente necesitas: Licencia de conducir vigente, C√©dula verde (o azul si no sos titular), Comprobante de seguro vigente (digital o impreso) y VTV al d√≠a."
  },
  {
    id: "f2",
    question: "¬øC√≥mo denuncio un siniestro?",
    answer: "¬°Es s√∫per f√°cil! Pod√©s hacerlo envi√°ndonos un WhatsApp al bot√≥n que ves en pantalla, o enviando un mail a siniestros@vanguardiaseguros.com.ar"
  },
  {
    id: "f3",
    question: "¬øEl seguro cubre granizo e inundaci√≥n?",
    answer: "S√≠, nuestras coberturas de 'Terceros Completo' y 'Todo Riesgo' incluyen protecci√≥n contra granizo, inundaci√≥n y da√±os por temporal sin topes ni franquicias sorpresa."
  },
  {
    id: "f4",
    question: "Me chocaron, ¬øqu√© hago?",
    answer: "Pedile los datos al tercero involucrado y contactate con nuestra √°rea legal al mail legales@vanguardiaseguros.com.ar para ayudarte con el proceso."
  },
  {
    id: "f5",
    question: "¬øTienen servicio de gr√∫a?",
    answer: "Por supuesto. Dependiendo de tu plan, cont√°s con servicio de remolque y auxilio mec√°nico las 24hs en todo el pa√≠s y pa√≠ses lim√≠trofes."
  }
];
---

<section id="faq" class="section faq-section">
  <div class="container">
    
    <div class="faq-layout">
      
      <div class="faq-sidebar reveal">
        <span class="badge">Dudas Frecuentes</span>
        <h2 class="title-lg">Resolvemos tus <br><span class="text-gradient">consultas</span></h2>
        <p class="text-lead faq-description">Todo lo que necesit√°s saber sobre tu cobertura, explicado simple.</p>
        
        <div class="help-card">
          <div class="icon-box-sm">üí¨</div>
          <h4>¬øTen√©s otra duda?</h4>
          <p>Hablamos directo por WhatsApp y lo resolvemos.</p>
          <a href="https://wa.me/5491162959939" target="_blank" class="btn-link">
            Chatear con nosotros &rarr;
          </a>
        </div>
      </div>

      <div class="faq-list">
        {faqs.map((faq) => (
          <div class="faq-item reveal" id={faq.id}>
            <button class="faq-question" aria-expanded="false">
              <span class="question-num">0{faqs.indexOf(faq) + 1}.</span>
              <span class="question-text">{faq.question}</span>
              <span class="icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
              </span>
            </button>
            <div class="faq-answer">
              <div class="answer-inner">
                <p>{faq.answer}</p>
              </div>
            </div>
          </div>
        ))}
      </div>

    </div>

  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const questions = document.querySelectorAll('.faq-question');
    questions.forEach(btn => {
      btn.addEventListener('click', () => {
        const item = btn.parentElement;
        if (!item) return;

        const answer = item.querySelector('.faq-answer') as HTMLElement | null;
        if (!answer) return;

        const isActive = item.classList.contains('active');

        // 1. CERRAR OTROS
        document.querySelectorAll('.faq-item').forEach(otherItem => {
          if (otherItem !== item) {
            otherItem.classList.remove('active');
            otherItem.querySelector('.faq-question')?.setAttribute('aria-expanded', 'false');
            const otherAnswer = otherItem.querySelector('.faq-answer') as HTMLElement | null;
            if (otherAnswer) otherAnswer.style.maxHeight = '';
          }
        });

        // 2. TOGGLE ACTUAL
        if (isActive) {
          item.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
          answer.style.maxHeight = '';
        } else {
          item.classList.add('active');
          btn.setAttribute('aria-expanded', 'true');
          answer.style.maxHeight = answer.scrollHeight + "px";
        }
      });
    });
  });
</script>

<style>
  .faq-section {
    background-color: var(--bg-body);
    position: relative;
  }

  /* LAYOUT DE DOS COLUMNAS */
  .faq-layout {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: 4rem;
    align-items: start;
  }

  .faq-description {
    margin-bottom: 2rem; 
    max-width: 400px;
  }

  /* --- SIDEBAR --- */
  .faq-sidebar {
    position: sticky;
    top: 100px; 
  }

  .badge {
    display: inline-block;
    background: #eff6ff; color: var(--primary);
    padding: 6px 16px; border-radius: 50px; font-weight: 700; font-size: 0.8rem;
    margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px;
  }

  /* La tarjetita de ayuda extra */
  .help-card {
    background: white;
    border: 1px solid var(--border);
    padding: 1.5rem;
    border-radius: 20px;
    margin-top: 2rem;
    box-shadow: var(--shadow-card);
  }
  .icon-box-sm { font-size: 1.5rem; margin-bottom: 0.5rem; }
  .help-card h4 { font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem; }
  .help-card p { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem; }
  .btn-link { 
    color: var(--primary); font-weight: 700; font-size: 0.9rem; text-decoration: none;
    transition: margin-left 0.2s;
  }
  .btn-link:hover { margin-left: 5px; text-decoration: underline; }

  /* --- LISTA DE PREGUNTAS --- */
  .faq-list {
    display: flex; flex-direction: column;
    gap: 1rem;
  }

  .faq-item {
    background: white;
    border: 1px solid var(--border);
    border-radius: 20px;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
  }

  /* --- ESTADO ACTIVO --- */
  .faq-item.active {
    background-color: var(--primary);
    border-color: var(--primary);
    box-shadow: 0 20px 40px -10px rgba(0, 32, 96, 0.3);
    transform: scale(1.02);
    z-index: 2;
  }

  .faq-question {
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    padding: 1.5rem 2rem;
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--text-main);
    transition: color 0.3s;
    gap: 1.5rem;
    font-family: inherit;
    font-size: inherit;
  }

  /* Numerito decorativo */
  .question-num {
    font-family: var(--font-body);
    font-size: 0.9rem;
    font-weight: 800;
    color: var(--primary);
    opacity: 0.6;
    min-width: 28px;
  }

  .question-text {
    font-weight: 700;
    font-size: 1.1rem;
    line-height: 1.4;
    flex-grow: 1;
  }

  /* --- ICONO ANIMADO --- */
  .icon-wrapper {
    width: 24px;
    height: 24px;
    min-width: 24px; 
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    color: var(--primary);
    opacity: 0.6;
    transition: transform 0.4s ease, color 0.3s;
  }
  
  .icon-wrapper svg {
    width: 100%;
    height: 100%;
    stroke-width: 2.5px;
  }

  /* Cambios de color cuando est√° activo */
  .faq-item.active .faq-question { 
    color: white; 
  }

  .faq-item.active .icon-wrapper { 
    color: var(--accent); /* Naranja */
    transform: rotate(45deg); 
    opacity: 1; /* IMPORTANTE: Opacidad al 100% para que el naranja brille */
  }

  .faq-item.active .question-num { 
    color: var(--accent); /* Naranja */
    opacity: 1; /* IMPORTANTE: Antes estaba en 0.4, ahora full color */
  }

  /* --- RESPUESTA --- */
  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .answer-inner {
    padding: 0 2rem 2rem 4rem;
    color: var(--text-muted);
    font-size: 1rem;
    line-height: 1.7;
  }

  /* Texto blanco suave cuando el fondo es azul */
  .faq-item.active .answer-inner {
    color: rgba(255, 255, 255, 0.85);
  }

  /* --- RESPONSIVE MOBILE --- */
  @media (max-width: 900px) {
    .faq-layout {
      grid-template-columns: 1fr;
      gap: .5rem;
    }
    
    .faq-sidebar { 
      position: relative;
      top: 0; 
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .help-card { display: none; }
    
    .faq-question { padding: 1.25rem; gap: 1rem; }
    .answer-inner { padding: 0 1.25rem 1.5rem 1.25rem; }
    
    .faq-item.active { transform: scale(1); }
  }
</style>